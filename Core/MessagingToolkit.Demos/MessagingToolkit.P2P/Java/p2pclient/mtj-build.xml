<?xml version="1.0" encoding="UTF-8"?><!--
	Automatically generated by MTJ on Mon May 18 13:41:43 SGT 2009
	DO NOT ALTER THIS FILE.  IT WILL BE OVERWRITTEN

	Changes may be made to build.xml and user-build.properties
-->
<project default="-mtj-build" name="mtj-p2pclient">
   <path id="classpath.p2pclient.JAVA_ME_3">
      <path location="${path.build.classes.JAVA_ME_3}"/>
      <path location="${path.build.classes.JAVA_ME_3}/_no_export"/>
      <path location="${project.root.p2pclient}/lib/LWUIT.jar"/>
   </path>
   <target name="-mtj-initialize">
      <echo message="Initializing MTJ Antenna build environment..."/>
      <taskdef resource="antenna.properties">
         <classpath location="${path.antenna.jar}"/>
      </taskdef>
      <mkdir dir="${path.build.classes.JAVA_ME_3}/_no_export"/>
   </target>
   <target depends="-mtj-initialize" name="-mtj-build">
      <echo message="Building source files..."/>
      <antcall target="-mtj-build-JAVA_ME_3"/>
   </target>
   <target depends="-mtj-initialize" name="-mtj-build-JAVA_ME_3">
      <echo message="Building source files for configuration JAVA_ME_3 ..."/>
      <wtkpreprocess debuglevel="info" destdir="${path.preprocess.output.JAVA_ME_3}" printsymbols="true" savesymbols="${path.preprocess.output.JAVA_ME_3}/usedSymbols.txt" srcdir="${project.root.p2pclient}/src/main/resources" verbose="true">
         <symbols_file name="${project.root.p2pclient}/JAVA_ME_3.symbols"/>
      </wtkpreprocess>
      <wtkpreprocess debuglevel="info" destdir="${path.preprocess.output.JAVA_ME_3}" printsymbols="true" savesymbols="${path.preprocess.output.JAVA_ME_3}/usedSymbols.txt" srcdir="${project.root.p2pclient}/src/main/java" verbose="true">
         <symbols_file name="${project.root.p2pclient}/JAVA_ME_3.symbols"/>
      </wtkpreprocess>
      <wtkbuild bootclasspath="${bootclasspath.JAVA_ME_3}" destdir="${path.build.classes.JAVA_ME_3}" encoding="${src.encoding}" source="1.3" sourcepath="" srcdir="${path.preprocess.output.JAVA_ME_3}">
         <classpath refid="classpath.p2pclient.JAVA_ME_3"/>
      </wtkbuild>
   </target>
   <target depends="-mtj-build" name="-mtj-jar">
      <echo message="Generating unobfuscated jar file..."/>
      <antcall target="-mtj-clean"/>
      <delete includeEmptyDirs="true" quiet="true">
         <fileset dir="${path.build.output}" includes="*,*/**"/>
      </delete>
      <antcall target="-mtj-internal-package"/>
   </target>
   <target depends="-mtj-build" name="-mtj-deployable">
      <echo message="Generating obfuscated jar file..."/>
      <antcall target="-mtj-clean"/>
      <delete includeEmptyDirs="true" quiet="true">
         <fileset dir="${path.build.output}" includes="*,*/**"/>
      </delete>
      <antcall target="-mtj-internal-package">
         <param name="flag.should.obfuscate" value="true"/>
      </antcall>
   </target>
   <target depends="-mtj-build" name="-mtj-internal-package">
      <antcall target="-mtj-internal-package-JAVA_ME_3"/>
   </target>
   <target depends="-mtj-build-JAVA_ME_3" name="-mtj-internal-package-JAVA_ME_3">
      <copy file="${descriptor.name}" tofile="${path.build.output.JAVA_ME_3}/${jad.name}"/>
      <wtkpackage autoversion="${flag.autoversion}" jadfile="${path.build.output.JAVA_ME_3}/${midlet.name}.jad" jarfile="${path.build.output.JAVA_ME_3}/${midlet.name}.jar" obfuscate="false" preverify="${flag.preverify}">
         <fileset dir="${path.build.classes.JAVA_ME_3}">
            <exclude name="_no_export/"/>
         </fileset>
         <classpath refid="classpath.p2pclient.JAVA_ME_3"/>
         <fileset dir="${project.root.p2pclient}/src/main/java">
            <exclude name="**/*.java"/>
            <exclude name="build/"/>
         </fileset>
         <fileset dir="${project.root.p2pclient}/src/main/resources">
            <exclude name="**/*.java"/>
            <exclude name="build/"/>
         </fileset>
         <zipfileset src="${project.root.p2pclient}/lib/LWUIT.jar"/>
      </wtkpackage>
      <antcall target="-mtj-obfuscate-JAVA_ME_3"/>
   </target>
   <target if="flag.should.obfuscate" name="-mtj-obfuscate">
      <antcall target="-mtj-obfuscate-JAVA_ME_3"/>
   </target>
   <target if="flag.should.obfuscate" name="-mtj-obfuscate-JAVA_ME_3">
      <wtkobfuscate jadfile="${path.build.output.JAVA_ME_3}/${midlet.name}.jad" jarfile="${path.build.output.JAVA_ME_3}/${midlet.name}.jar">
         <argument value="'-keep public class * extends javax.microedition.midlet.MIDlet'"/>
         <argument value="-dontusemixedcaseclassnames -dontnote -defaultpackage ''"/>
      </wtkobfuscate>
      <wtkpreverify if="flag.preverify" jadfile="${path.build.output.JAVA_ME_3}/${midlet.name}.jad" jarfile="${path.build.output.JAVA_ME_3}/${midlet.name}.jar"/>
   </target>
   <target depends="-mtj-deployable" name="-mtj-run">
      <echo message="Running emulator..."/>
      <wtkrun device="${run.device.name}" jadfile="${path.build.output.JAVA_ME_3}/${midlet.name}.jad" trace="${run.trace.options}" wait="true"/>
   </target>
   <target depends="-mtj-deployable" name="-mtj-makeprc">
      <echo message="Generating Palm PRC file..."/>
      <wtkmakeprc jadfile="${path.build.output.JAVA_ME_3}/${midlet.name}.jad" prcfile="${path.build.output.JAVA_ME_3}/${midlet.name}.prc"/>
   </target>
   <target name="-mtj-clean">
      <delete includeEmptyDirs="true" quiet="true">
         <fileset dir="${path.build.classes}" includes="*,*/**"/>
         <fileset dir="${path.preprocess.output}" includes="*,*/**"/>
      </delete>
   </target>
</project>